<Window
    x:Class="Peek.UI.Views.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.modernwpf.com/2019"
    xmlns:vm="clr-namespace:Peek.UI.ViewModels"
    Title="{Binding MainWindowData.Title, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
    Width="{Binding MainWindowData.Rectangle.Width, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
    Height="{Binding MainWindowData.Rectangle.Height, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
    MinWidth="500"
    MinHeight="500"
    d:DataContext="{d:DesignInstance vm:MainViewModel}"
    ui:TitleBar.Background="{DynamicResource PrimaryBackgroundBrush}"
    ui:TitleBar.IsIconVisible="True"
    ui:WindowHelper.UseModernWindowStyle="True"
    Background="{DynamicResource PrimaryBackgroundBrush}"
    BorderThickness="1"
    Icon="/PowerToys.Peek.UI;component/Resources/Peek.ico"
    Left="{Binding MainWindowData.Rectangle.Left, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
    ResizeMode="NoResize"
    Top="{Binding MainWindowData.Rectangle.Top, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
    Visibility="{Binding MainWindowData.Visibility, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
    WindowStartupLocation="Manual"
    mc:Ignorable="d">
    <Grid>
        <ui:ProgressRing IsActive="{Binding IsLoading, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" />
        <!--  TODO: Create UI control that displays unsupported file gracefully  -->
        <Image
            x:Name="ImageControl"
            Source="{Binding Bitmap, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
            Stretch="Uniform"
            StretchDirection="DownOnly"
            Visibility="{Binding IsImageReady, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" />
    </Grid>
</Window>